name: Publications Update Reminder

on:
  schedule:
    # Run every 6 months (January 1st and July 1st at midnight)
    - cron: '0 0 1 1,7 *'
  workflow_dispatch: # Allow manual trigger

jobs:
  create-reminder-issue:
    runs-on: ubuntu-latest
    permissions:
      issues: write

    steps:
      - name: Create Reminder Issue
        uses: actions/github-script@v7
        with:
          script: |
            const currentDate = new Date().toISOString().split('T')[0];
            const issue = await github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: `ðŸ“š Publications Update Reminder - ${currentDate}`,
              body: `## Time to Update Publications!

            It's been 6 months since the last update. Please update the publications data.

            ### Steps to Update:

            1. Visit [Google Scholar Profile](https://scholar.google.com/citations?user=AF8zRPwAAAAJ)
            2. Identify the **5 most recent** publications (sort by year)
            3. Identify the **5 most cited** publications (sort by citations)
            4. Edit \`data/publications.json\`:
               - Update the \`mostRecent\` array
               - Update the \`mostCited\` array
               - Update \`lastUpdated\` to today's date
            5. Commit and push:
               \`\`\`bash
               git add data/publications.json
               git commit -m "Update publications data - ${currentDate}"
               git push
               \`\`\`

            ### Need Help?

            Run the helper script for instructions:
            \`\`\`bash
            cd scripts
            node update_publications.js
            \`\`\`

            Or see: \`scripts/README.md\` for detailed instructions.

            ---
            **Close this issue after updating the publications.**`,
              labels: ['publications', 'maintenance']
            });
            console.log(`Created issue #${issue.data.number}`)
